<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Grid (grid.Grid)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">grid</a> &#x00BB; Grid</nav><header class="odoc-preamble"><h1>Module <code><span>Grid</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#grids-aka-two-dimensional-arrays">Grids aka two-dimensional arrays</a></li></ul></nav><div class="odoc-content"><h3 id="grids-aka-two-dimensional-arrays"><a href="#grids-aka-two-dimensional-arrays" class="anchor"></a>Grids aka two-dimensional arrays</h3><p>Following conventions in mathematics, grids are considered rows first. Thus in the following, <code>height</code> refers to the first dimension and <code>width</code> to the second dimension.</p><pre>             0   1       j      width-1
           +---+---+---+---+---+--+
        0  |   |   |   |   |   |  |
           +---+---+---+---+---+--+
        1  |   |   |   |   |   |  |
           +---+---+---+---+---+--+
        i  |   |   |   | X |   |  |
           +---+---+---+---+---+--+
  height-1 |   |   |   |   |   |  |
           +---+---+---+---+---+--+</pre><p>Following OCaml conventions, indices are 0-based.</p><p>For the width to be well-defined, some of the following functions assume a positive number of rows (and, to be consistent, a positive number of columns).</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span><span><span class="type-var">'a</span> array</span> array</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-position"><a href="#type-position" class="anchor"></a><code><span><span class="keyword">type</span> position</span><span> = int * int</span></code></div><div class="spec-doc"><p>A position is an ordered pair <code>(i,j)</code>, where <code>i</code> is the row and <code>j</code> is the column. Rows and columns are 0-based.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-height"><a href="#val-height" class="anchor"></a><code><span><span class="keyword">val</span> height : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the number of rows.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-width"><a href="#val-width" class="anchor"></a><code><span><span class="keyword">val</span> width : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the number of columns.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>both height and width, in that order</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make"><a href="#val-make" class="anchor"></a><code><span><span class="keyword">val</span> make : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>make h w v</code> returns a new grid with height <code>h</code> and width <code>w</code>, where all values are equal to <code>v</code>. Raises <code>Invalid_argument</code> if <code>h&lt;1</code> or <code>w&lt;1</code>.</p><p>For <code>h&gt;=1</code> and <code>w&gt;=1</code>, this is equivalent to <code>Array.make_matrix h w v</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>init h w f</code> returns a new grid with height <code>h</code> and width <code>w</code>, where the value at position <code>p</code> is <code>f p</code>. Raises <code>Invalid_argument</code> if <code>h&lt;1</code> or <code>w&lt;1</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span><span class="keyword">val</span> copy : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>copy g</code> returns a new grid that contains the same elements as <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>get g p</code> returns the value at position <code>p</code>. Raises <code>Invalid_argument</code> if the position is out of bounds.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set g p v</code> sets the value at position <code>p</code>, with <code>v</code>. Raises <code>Invalid_argument</code> if the position is out of bounds.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-inside"><a href="#val-inside" class="anchor"></a><code><span><span class="keyword">val</span> inside : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>inside g p</code> indicates whether position <code>p</code> is a legal position in <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-north"><a href="#val-north" class="anchor"></a><code><span><span class="keyword">val</span> north : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position above in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-north_west"><a href="#val-north_west" class="anchor"></a><code><span><span class="keyword">val</span> north_west : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position above left in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-west"><a href="#val-west" class="anchor"></a><code><span><span class="keyword">val</span> west : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position to the left in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-south_west"><a href="#val-south_west" class="anchor"></a><code><span><span class="keyword">val</span> south_west : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position below left in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-south"><a href="#val-south" class="anchor"></a><code><span><span class="keyword">val</span> south : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position below in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-south_east"><a href="#val-south_east" class="anchor"></a><code><span><span class="keyword">val</span> south_east : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position below right in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-east"><a href="#val-east" class="anchor"></a><code><span><span class="keyword">val</span> east : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position to the right in the grid</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-north_east"><a href="#val-north_east" class="anchor"></a><code><span><span class="keyword">val</span> north_east : <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p>the position above right in the grid</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-direction"><a href="#type-direction" class="anchor"></a><code><span><span class="keyword">type</span> direction</span><span> = </span></code><ol><li id="type-direction.N" class="def variant constructor anchored"><a href="#type-direction.N" class="anchor"></a><code><span>| </span><span><span class="constructor">N</span></span></code></li><li id="type-direction.NW" class="def variant constructor anchored"><a href="#type-direction.NW" class="anchor"></a><code><span>| </span><span><span class="constructor">NW</span></span></code></li><li id="type-direction.W" class="def variant constructor anchored"><a href="#type-direction.W" class="anchor"></a><code><span>| </span><span><span class="constructor">W</span></span></code></li><li id="type-direction.SW" class="def variant constructor anchored"><a href="#type-direction.SW" class="anchor"></a><code><span>| </span><span><span class="constructor">SW</span></span></code></li><li id="type-direction.S" class="def variant constructor anchored"><a href="#type-direction.S" class="anchor"></a><code><span>| </span><span><span class="constructor">S</span></span></code></li><li id="type-direction.SE" class="def variant constructor anchored"><a href="#type-direction.SE" class="anchor"></a><code><span>| </span><span><span class="constructor">SE</span></span></code></li><li id="type-direction.E" class="def variant constructor anchored"><a href="#type-direction.E" class="anchor"></a><code><span>| </span><span><span class="constructor">E</span></span></code></li><li id="type-direction.NE" class="def variant constructor anchored"><a href="#type-direction.NE" class="anchor"></a><code><span>| </span><span><span class="constructor">NE</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-move"><a href="#val-move" class="anchor"></a><code><span><span class="keyword">val</span> move : <span><a href="#type-direction">direction</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rotate_left"><a href="#val-rotate_left" class="anchor"></a><code><span><span class="keyword">val</span> rotate_left : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>rotate_left g</code> returns a new grid that is the left rotation of <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rotate_right"><a href="#val-rotate_right" class="anchor"></a><code><span><span class="keyword">val</span> rotate_right : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>rotate_right g</code> returns a new grid that is the right rotation of <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>map f g</code> returns a fresh grid, with the size of the grid <code>g</code> and where the value at position <code>p</code> is given by <code>f p (get g p)</code></p></div></div><p><em>The following functions that iterate or fold over the neighbors of <code>p</code> all begin by calling <code>f</code> on the cell north of <code>p</code> and rotate clockwise.</em></p><div class="odoc-spec"><div class="spec value anchored" id="val-iter4"><a href="#val-iter4" class="anchor"></a><code><span><span class="keyword">val</span> iter4 : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter4 f g p</code> applies function <code>f</code> on the four neighbors of position <code>p</code> (provided they exist)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter8"><a href="#val-iter8" class="anchor"></a><code><span><span class="keyword">val</span> iter8 : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter8 f g p</code> applies function <code>f</code> on the eight neighbors of position <code>p</code> (provided they exist)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold4"><a href="#val-fold4" class="anchor"></a><code><span><span class="keyword">val</span> fold4 : 
  <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold4 f g p</code> folds function <code>f</code> on the four neighbors of position <code>p</code> (provided they exist)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold8"><a href="#val-fold8" class="anchor"></a><code><span><span class="keyword">val</span> fold8 : 
  <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold8 f g p</code> folds function <code>f</code> on the eight neighbors of position <code>p</code> (provided they exist)</p></div></div><p><em><code>iter</code> and <code>fold</code> both begin at the top left of the grid and move left to right in each row from top to bottom.</em></p><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>iter f g</code> applies function <code>f</code> at each position of the grid <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'acc</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'acc</span></span></code></div><div class="spec-doc"><p><code>fold f g</code> folds function <code>f</code> over each position of the grid <code>g</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span><span>(<span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-position">position</a></span></code></div><div class="spec-doc"><p><code>find f g</code> returns a position in <code>g</code> where <code>f</code> holds, or raises <code>Not_found</code> if there is none</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : 
  <span><span class="optlabel">?bol</span>:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?eol</span>:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sep</span>:<span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-position">position</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>print pp fmt g</code> prints the grid <code>g</code> on formatter <code>fmt</code>, using function <code>pp</code> to print each element.</p><p>Function <code>bol</code> is called at the beginning of each line, and is passed the line number. The default function does nothing.</p><p>Function <code>eol</code> is called at the end of each line, and is passed the line number. The default function calls <code>Format.pp_print_newline</code>.</p><p>Function <code>sep</code> is printed between two consecutive element on a given row (and is passed the position of the left one). The default function does nothing.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-print_chars"><a href="#val-print_chars" class="anchor"></a><code><span><span class="keyword">val</span> print_chars : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span>char <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>prints a grid of characters using <code>Format.pp_print_char</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span class="xref-unresolved">Stdlib</span>.in_channel <span class="arrow">&#45;&gt;</span></span> <span>char <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>read c</code> reads a grid of characters from the input channel <code>c</code>. Raises <code>Invalid_argument</code> if the lines do not have the same length, or there is no line at all.</p></div></div></div></body></html>
